//.............................................................................

class C1
{
	int m_x;

	construct (int x)
	{
		printf ("C1.construct (%d)\n", x);
		m_x = x;
	}

	destruct ()
	{
		printf ("C1.destruct () { m_x = %d }\n", m_x);
	}
}

class C2
{
	C1 m_c1;

	int m_x;

	construct (int x)
	{
		m_c1.construct (x * 2);

		printf ("C2.construct (%d)\n", x);
		m_x = x;
	}

	destruct ()
	{
		printf ("C2.destruct () { m_x = %d } \n", m_x);
	}
}

C1* g_p;

foo ()
{
	stack C2 x construct (10);

	C2* p = new C2 construct (100);
	g_p = p.m_c1;
}

int 
main ()
{
	foo ();

	jnc.RunGcWaitForDestructors ();

	printf ("main is done.\n");
	return 10; 
}

//.............................................................................

// system functions

int
printf (
	unsafe const thin char* pFormat,
	unsafe ...
	);

//.............................................................................
