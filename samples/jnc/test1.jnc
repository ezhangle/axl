//.............................................................................

/*
thread int t_TlsTest = 5;

void
ThreadProc ()
{
	int Tid = GetCurrentThreadId ();
	unsafe thin int* p = &t_TlsTest;

	printf ("+THREAD: TID = %x, t_TlsTest @%x = %d\n", Tid, p, t_TlsTest);

	t_TlsTest *= 2;

	printf ("-THREAD: TID = %x, t_TlsTest @%x = %d\n", Tid, p, t_TlsTest);
}
*/

int property sx_MyProp;

int 
sx_MyProp.get ()
{
	printf ("sx_MyProp.get ()\n");
	return 100;
}

sx_MyProp.set (int x)
{
	printf ("sx_MyProp.set (%d)\n", x);
}

int  
main ()
{
	printf ("main ()\n");

	int property thin* px = &sx_MyProp;

	int x = px.get ();
	px.set (200);

/*
	CreateThread (ThreadProc);
	Sleep (100);

	CreateThread (ThreadProc);
	Sleep (100);

	CreateThread (ThreadProc);

	Sleep (1000);
*/

	return 10;
}

//.............................................................................

// system functions

int
printf (
	unsafe thin const char* pFormat,
	unsafe ...
	);

void
RunGc ();

int
GetCurrentThreadId ();

bool
CreateThread (function* pf ());

void
Sleep (unsigned int32 MsCount);

//.............................................................................
