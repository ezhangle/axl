//.............................................................................

int 
main ()
{
	printf ("main ()\n");

	foo (1);
	foo (2);
	foo (3);

	CreateThread (ThreadProc);
	CreateThread (ThreadProc);
	CreateThread (ThreadProc);

	Sleep (500);

	return 10; 
}

ThreadProc ()
{
	foo (1);
	foo (2);
	foo (3);
}

foo (int x)
{
	printf ("TID %x: foo (%d)\n", GetCurrentThreadId (), x);

	thread once
	{
		printf ("TID %x: foo (%d) once!\n", GetCurrentThreadId (), x);
	}
}

//.............................................................................

// system functions

int
printf (
	unsafe const thin char* pFormat,
	unsafe ...
	);

void
RunGc ();

int
GetCurrentThreadId ();

bool
CreateThread (function* pf ());

void
Sleep (unsigned int32 MsCount);

//.............................................................................
