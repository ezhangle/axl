//.............................................................................

class C1
{
	int m_x;

	construct (int x)
	{
		printf ("C1.construct (%d)\n", x);
		m_x = x;
	}

	destruct ()
	{
		printf ("C1.destruct () { m_x = %d }\n", m_x);
	}

	Foo (
		int x,
		int y
		)
	{
		printf ("C1.Foo (%d, %d) { m_x = %d }\n", x, y, m_x);		
	}
}

void
Foo (
	int x,
	int y
	)
{
	printf ("Foo (%d, %d)\n", x, y);
}
	
int 
main ()
{
	printf ("main ()\n");

	weak C1* wp;
	weak function* wpf (int);

	{
	C1* p = new C1 (100);
	wp = p;
	wpf = p.weak Foo ~(, 7);
	}

	weak multicast wmc (int);
	wmc += wpf;

	function* pf (int) = wpf;

	jnc.RunGc ();

	C1* p = wp;
	if (p)
		printf ("still alive!\n");
	else
		printf ("dead already...\n");

	wmc (700);

	return 10; 
}

//.............................................................................

// system functions

int
printf (
	unsafe const thin char* pFormat,
	unsafe ...
	);

//.............................................................................
